public class YoutubeController {
    public YoutubeDataList[] dataList {set;get;}
    public string searchText {set;get;}
    
    public void SearchHandler(){
        dataList = new YoutubeDataList[] {};
        string query = searchText.replaceAll(' ','+');
        string endpoint ='https://youtube.googleapis.com/youtube/v3/search?part=snippet&q='+query+'&key=AIzaSyCiAJuxO2URzhdTJOC3mB1oPzGzsNRab-A';
        
        HttpRequest request = new HttpRequest();
        request.setEndpoint(endpoint);
        request.setHeader('Accept','application/json');
        request.setMethod('GET');
            HttpResponse response = (new Http()).send(request);
        string    body=response.getBody();
            if(response.getStatusCode()==200){
                YoutubeWrapper wrap =(YoutubeWrapper) JSON.deserialize(body, YoutubeWrapper.class);
                
                for (integer i =0; i < wrap.items.size(); i++){
                    dataList.add(new YoutubeDataList(wrap.items[i].snippet.title,wrap.items[i].snippet.description, wrap.items[i].snippet.thumbnails.high.url, wrap.items[i].snippet.publishTime));
                }
            }
    }
    
 //-------------------------------------------------
 
    Public class YoutubeDataList{
        public string title {set;get;}
        public string description {set;get;}
        public string url {set;get;}
        public string publishTime {set;get;}
        
        public YoutubeDataList(string title, string description,string url,string publishTime){
            this.title =title;
            this.description = description;
            this.url = url;
            this.publishTime = publishTime;
        }
    }
    
    
    
//-----------------------------------------------------------------------------------------------------
//
//Generated by AdminBooster
//

public class YoutubeWrapper{
	public String kind;
	public String etag;	
	public String nextPageToken;	
	public String regionCode;
	public cls_pageInfo pageInfo;
	public cls_items[] items;
}
    class cls_pageInfo {
		public Integer totalResults;
        public Integer resultsPerPage;	
	}
	class cls_items {
		public String kind;	
		public String etag;	
		public cls_id id;
		public cls_snippet snippet;
	}
	class cls_id {
		public String kind;	
		public String channelId;	
	}
	class cls_snippet {
		public String publishedAt;	
		public String channelId;	
		public String title;	
		public String description;	
		public cls_thumbnails thumbnails;
		public String channelTitle;	
		public String liveBroadcastContent;	
		public String publishTime;	
	}
	class cls_thumbnails {
		public cls_default default_X;
		public cls_medium medium;
		public cls_high high;
	}
	class cls_default {
		public String url;	
	}
	class cls_medium {
		public String url;	
	}
	class cls_high {
		public String url;	
	}
}